<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .hero {
      width: 100%;
      max-width: 1200px;
    }
    .scene {
      width: 100%;
      height: auto;
    }
    .usb-on-rug {
      cursor: grab;
    }
    .usb-on-rug.dragging {
      cursor: grabbing;
    }
    .file-explorer {
      transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .scene {
      transition: transform 1s ease-in-out, filter 1s ease-in-out;
    }
    .scene.zoomed {
      transform-origin: 150px 80px; /* Monitor center */
    }
  </style>
</head>
<body>
  <main class="hero">
    <div class="hero__wrap">
      <!-- SVG illustration: black background, white strokes -->
      <svg class="scene" viewBox="0 0 1200 300" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Sketch of a desk with a PC and a rug that reads FOLIO">
        <rect width="1200" height="300" fill="#000" />

        <defs>
          <filter id="wobble">
            <feTurbulence baseFrequency="0.01" numOctaves="2" result="t">
              <animate attributeName="baseFrequency" dur="6s" values="0.008;0.02;0.008" repeatCount="indefinite" />
            </feTurbulence>
            <feDisplacementMap in="SourceGraphic" in2="t" scale="4" xChannelSelector="R" yChannelSelector="G"/>
          </filter>
          
          <!-- Clip path to show only the part of USB outside the port -->
          <clipPath id="usb-clip">
            <rect x="0" y="0" width="400" height="300" />
          </clipPath>
        </defs>

        <g class="wobble" filter="url(#wobble)">

        <!-- Desk top / rug (enlarged) -->
        <path class="rug draw-rug" d="M0 160 H1200 V300 H0 Z" fill="#000" stroke="#fff" stroke-width="4" stroke-linejoin="round"/>

        
          <!-- Rug letters: F O L I O (large rounded letters) -->
        <g class="folio-letters" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
          <g class="letter letter-f" transform="translate(550,163)">
            <path d="M20 0 V136" />
            <path d="M90 0 V35" />
            <path d="M50 35 H90" />
            <path d="M50 35 V55" />
            <path d="M50 55 H75" />
            <path d="M75 55 V75" />
            <path d="M50 75 H75" />
            <path d="M50 75 V136" />
          </g>

          <g class="letter letter-o1" transform="translate(650,161)">
            <path d="M50 4 V136" />
            <path d="M140 4 V136" />
            <rect x="80" y="50" width="30" height="40"  />
          </g>

          <g class="letter letter-l" transform="translate(790,165)">
            <path d="M60 0 V132" />
            <path d="M95 100 H138" />
            <path d="M140 100 V132" />
            <path d="M95 -3 V100" />
          </g>

          <g class="letter letter-i" transform="translate(860,165)">
            <path d="M130 0 V132" />
            <path d="M190 0 V132" />
          </g>

          <g class="letter letter-o2" transform="translate(880,161)">
            <path d="M230 4 V136" />
            <rect x="260" y="50" width="30" height="40"  />
          </g>
        </g>

        <!-- Desk front edge line -->
        <path class="desk-edge draw-desk-edge" d="M0 160 H1200" stroke="#fff" stroke-width="3" />

        <!-- Rug outline on top so the rectangle appears complete -->
        <rect class="rug-outline" x="0" y="160" width="1200" height="140" fill="none" stroke="#fff" stroke-width="4" stroke-linejoin="round" />

        <!-- Monitor -->
        <g class="pc-setup">
          <g class="monitor draw-desktop" transform="translate(35,8) scale(1.25)">
          <rect x="0" y="0" width="240" height="140" fill="#000" stroke="#fff" stroke-width="6" rx="4"/>
          <rect x="20" y="18" width="200" height="100" fill="#000" stroke="#fff" stroke-width="4" rx="2"/>
          <rect x="104" y="150" width="32" height="14" fill="#000" stroke="#fff" stroke-width="4"/>
        </g>

        <!-- PC tower (moved right and scaled) -->
        <g class="tower draw-desktop" transform="translate(360,20) scale(1.35)">
          <rect x="0" y="0" width="80" height="120" fill="#000" stroke="#fff" stroke-width="6" rx="6"/>
          <rect x="8" y="14" width="64" height="18" fill="#000" stroke="#fff" stroke-width="3" rx="3"/>
          <rect x="8" y="42" width="24" height="12" fill="#000" stroke="#fff" stroke-width="3" rx="2"/>
          <circle cx="56" cy="70" r="4" fill="#fff" />
          
          <!-- USB Port slot at bottom of PC (HORIZONTAL like a real USB-A port) -->
          <g class="usb-port">
            <!-- Outer port frame - horizontal rectangle (like real USB port) -->
            <rect x="8" y="102" width="24" height="10" fill="#000" stroke="#fff" stroke-width="3" rx="2"/>
            <!-- Inner port opening where USB connector goes - horizontal slot -->
            <rect x="11" y="105" width="18" height="4" fill="#222" stroke="#fff" stroke-width="1.5"/>
          </g>
        </g>

        <!-- Small USB stick (DRAGGABLE!) -->
        <g class="usb usb-on-rug draw-desktop" transform="translate(720,226) scale(1.1)" fill="#000" stroke="#fff" stroke-width="4" stroke-linejoin="round">
          <rect class="usb-body" x="0" y="0" width="30" height="8" rx="1"/>
          <rect class="usb-tip" x="30" y="0" width="6" height="8" rx="1"/>
        </g>
        
        <!-- USB stub when plugged in (hidden by default) - matches port size EXACTLY -->
        <g class="usb-plugged" style="opacity: 0; pointer-events: none;" fill="#000" stroke="#fff" stroke-width="1.5" stroke-linejoin="round">
          <!-- Stub size matches port inner opening EXACTLY: 18 wide √ó 4 tall -->
          <rect x="0" y="0" width="18" height="4" rx="0.5"/>
        </g>
        
        <!-- File Explorer Window (shown inside monitor screen) -->
        <g class="file-explorer" style="opacity: 0;" transform="translate(60,35)">
          <!-- Window background -->
          <rect x="0" y="0" width="180" height="90" fill="#000" stroke="#fff" stroke-width="3" rx="3"/>
          
          <!-- Title bar -->
          <rect x="0" y="0" width="180" height="15" fill="#333" stroke="#fff" stroke-width="3" rx="3"/>
          <text x="5" y="11" fill="#fff" font-family="monospace" font-size="8">File Explorer - USB Drive</text>
          
          <!-- Window controls -->
          <circle cx="168" cy="7" r="2.5" fill="#f00" stroke="#fff" stroke-width="0.5"/>
          <circle cx="158" cy="7" r="2.5" fill="#ff0" stroke="#fff" stroke-width="0.5"/>
          <circle cx="148" cy="7" r="2.5" fill="#0f0" stroke="#fff" stroke-width="0.5"/>
          
          <!-- File list -->
          <g transform="translate(5,22)">
            <rect x="0" y="0" width="12" height="12" fill="#000" stroke="#fff" stroke-width="1.5" rx="1"/>
            <text x="15" y="9" fill="#fff" font-family="monospace" font-size="7">Portfolio.pdf</text>
            
            <rect x="0" y="18" width="12" height="12" fill="#000" stroke="#fff" stroke-width="1.5" rx="1"/>
            <text x="15" y="27" fill="#fff" font-family="monospace" font-size="7">Projects</text>
            
            <rect x="0" y="36" width="12" height="12" fill="#000" stroke="#fff" stroke-width="1.5" rx="1"/>
            <text x="15" y="45" fill="#fff" font-family="monospace" font-size="7">Resume.docx</text>
            
            <rect x="0" y="54" width="12" height="12" fill="#000" stroke="#fff" stroke-width="1.5" rx="1"/>
            <text x="15" y="63" fill="#fff" font-family="monospace" font-size="7">Photos</text>
          </g>
        </g>
        
        </g>    
      </svg>


    </div>
  </main>

  <script>
    const usb = document.querySelector('.usb-on-rug');
    const usbPlugged = document.querySelector('.usb-plugged');
    const fileExplorer = document.querySelector('.file-explorer');
    const svg = document.querySelector('.scene');
    const usbPort = document.querySelector('.usb-port');
    let isDragging = false;
    let currentX = 720;
    let currentY = 226;
    let currentScale = 1.1;
    let startX, startY;
    let isPluggedIn = false;

    // USB port position (accounting for PC tower transform)
    // PC tower is at translate(360,20) scale(1.35)
    // Horizontal port center is at x="20" y="107"
    const portX = 360 + (20 * 1.35); // Center of horizontal port = 387
    const portY = 20 + (107 * 1.35);  // Center of horizontal port = 164.45
    const snapDistance = 60; // Distance to trigger snap on release

    console.log('üéØ Port position:', portX, portY);

    // Get SVG point from mouse/touch coordinates
    function getMousePosition(evt) {
      const CTM = svg.getScreenCTM();
      const clientX = evt.clientX || (evt.touches && evt.touches[0].clientX);
      const clientY = evt.clientY || (evt.touches && evt.touches[0].clientY);
      return {
        x: (clientX - CTM.e) / CTM.a,
        y: (clientY - CTM.f) / CTM.d
      };
    }

    function updateUSBTransform(x, y, scale, rotation = 0) {
      usb.setAttribute('transform', `translate(${x},${y}) scale(${scale}) rotate(${rotation})`);
    }

    function checkSnapToPort() {
      const distance = Math.sqrt(
        Math.pow(currentX - portX, 2) + 
        Math.pow(currentY - portY, 2)
      );

      console.log('üìè Distance to port:', distance.toFixed(2));

      if (distance < snapDistance) {
        // USBÊèíÂÖ•Êó∂ÁöÑÂ§ÑÁêÜ
        isPluggedIn = true;
        
        // Hide the draggable USB and show the plugged-in stub
        usb.style.transition = 'opacity 0.3s ease-out';
        usb.style.opacity = '0';
        
        // Show small rectangular stub that matches port size exactly
        usbPlugged.style.opacity = '1';
        usbPlugged.style.transition = 'opacity 0.3s ease-in';
        
        // Position the stub FLUSH with port opening - no gap!
        const stubX = 360 + (11 * 1.35);
        const stubY = 20 + (105 * 1.35);
        usbPlugged.setAttribute('transform', `translate(${stubX},${stubY}) scale(1.35)`);
        
        // Port glows green
        usbPort.style.filter = 'drop-shadow(0 0 10px #00ff00)';
        
        console.log('‚úÖ USB INSERTED! Zooming into monitor...');
        
        // Zoom entire scene into the monitor!
        setTimeout(() => {
          svg.classList.add('zoomed');
          // Calculate zoom to focus on monitor (at ~150, 80)
          // Scale up to 3x and translate to center the monitor
          svg.style.transform = 'translate(300px, 50px) scale(3)';
          
          // Dim everything except monitor area
          const wobbleGroup = document.querySelector('.wobble');
          wobbleGroup.style.filter = 'url(#wobble) brightness(0.3)';
          
          // Show file explorer inside monitor after zoom
          setTimeout(() => {
            fileExplorer.style.opacity = '1';
          }, 600);
        }, 400);
        
      } else {
        isPluggedIn = false;
        usbPort.style.filter = '';
        console.log('‚ùå Released too far from port');
      }
    }

    function startDrag(evt) {
      if (isPluggedIn) {
        isPluggedIn = false;
        usbPort.style.filter = '';
        
        // Zoom back out to normal view
        svg.classList.remove('zoomed');
        svg.style.transform = '';
        
        // Restore brightness
        const wobbleGroup = document.querySelector('.wobble');
        wobbleGroup.style.filter = 'url(#wobble)';
        
        // Hide file explorer
        fileExplorer.style.opacity = '0';
        
        // Hide the stub and show the full USB again
        usbPlugged.style.opacity = '0';
        usb.style.opacity = '1';
        usb.style.transition = 'opacity 0.3s ease-in';
        
        // Return USB to normal size
        currentScale = 1.1;
        updateUSBTransform(currentX, currentY, currentScale, 0);
        console.log('üîì USB UNPLUGGED - Zoomed back out');
        
        setTimeout(() => {
          usb.style.transition = '';
        }, 300);
      }
      isDragging = true;
      usb.classList.add('dragging');
      const coord = getMousePosition(evt);
      startX = coord.x - currentX;
      startY = coord.y - currentY;
      evt.preventDefault();
    }

    function drag(evt) {
      if (!isDragging) return;
      evt.preventDefault();
      const coord = getMousePosition(evt);
      currentX = coord.x - startX;
      currentY = coord.y - startY;
      currentScale = 1.1;
      updateUSBTransform(currentX, currentY, currentScale, 0); // Keep horizontal while dragging
      
      // Check proximity to port and show hint (but DON'T auto-snap)
      const distance = Math.sqrt(
        Math.pow(currentX - portX, 2) + 
        Math.pow(currentY - portY, 2)
      );
      
      // Visual hint when nearby - yellow glow
      if (distance < snapDistance) {
        usbPort.style.filter = 'drop-shadow(0 0 6px #ffff00)';
      } else {
        usbPort.style.filter = '';
      }
    }

    function endDrag() {
      isDragging = false;
      usb.classList.remove('dragging');
      checkSnapToPort();
    }

    // Mouse events
    usb.addEventListener('mousedown', startDrag);
    document.addEventListener('mousemove', drag);
    document.addEventListener('mouseup', endDrag);

    // Touch events for mobile
    usb.addEventListener('touchstart', startDrag);
    document.addEventListener('touchmove', drag);
    document.addEventListener('touchend', endDrag);
  </script>
</body>
</html>